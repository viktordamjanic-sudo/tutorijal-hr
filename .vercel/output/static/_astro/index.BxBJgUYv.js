import{c as h,d as f,e as $,f as D}from"./chunk-5RWUYJKV.iI5DGQDX.js";const L=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],_=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,C="pk_live_",B="pk_test_";function R(e){if(!e.endsWith("$"))return!1;const t=e.slice(0,-1);return t.includes("$")?!1:t.includes(".")}function g(e,t={}){if(e=e||"",!e||!w(e)){if(t.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(t.fatal&&!w(e))throw new Error("Publishable key not valid.");return null}const r=e.startsWith(C)?"production":"development";let n;try{n=_(e.split("_")[2])}catch{if(t.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!R(n)){if(t.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=n.slice(0,-1);return t.proxyUrl?o=t.proxyUrl:r!=="development"&&t.domain&&t.isSatellite&&(o=`clerk.${t.domain}`),{instanceType:r,frontendApi:o}}function w(e=""){try{if(!(e.startsWith(C)||e.startsWith(B)))return!1;const t=e.split("_");if(t.length!==3)return!1;const r=t[2];return r?R(_(r)):!1}catch{return!1}}function j(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const r=typeof t=="string"?t:t.hostname;let n=e.get(r);return n===void 0&&(n=L.some(o=>r.endsWith(o)),e.set(r,n)),n}}}function b(e){return!1}var F=class P extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Object.setPrototypeOf(this,P.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(t,r,n,o){const i="Clerk:",s=new RegExp(i.replace(" ","\\s*"),"i");return r=r.replace(s,""),r=`${i} ${r.trim()}

(code="${n}")

`,o&&(r+=`

Docs: ${o}`),r}};const J=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function z({packageName:e,customMessages:t}){let r=e;function n(i,s){if(!s)return`${r}: ${i}`;let u=i;const c=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const a of c){const l=(s[a[1]]||"").toString();u=u.replace(`{{${a[1]}}}`,l)}return`${r}: ${u}`}const o={...J,...t};return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(o,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(o.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(o.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(o.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}var m=class O extends F{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(t,r){super({...r,message:t}),Object.setPrototypeOf(this,O.prototype)}};const N={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,t)=>t<5,retryImmediately:!1,jitter:!0},V=100,A=async e=>new Promise(t=>setTimeout(t,e)),U=(e,t)=>t?e*(1+Math.random()):e,W=e=>{let t=0;const r=()=>{const n=e.initialDelay,o=e.factor;let i=n*Math.pow(o,t);return i=U(i,e.jitter),Math.min(e.maxDelayBetweenRetries||i,i)};return async()=>{await A(r()),t++}},H=async(e,t={})=>{let r=0;const{shouldRetry:n,initialDelay:o,maxDelayBetweenRetries:i,factor:s,retryImmediately:u,jitter:c,onBeforeRetry:a}={...N,...t},l=W({initialDelay:o,maxDelayBetweenRetries:i,factor:s,jitter:c});for(;;)try{return await e()}catch(d){if(r++,!n(d,r))throw d;a&&await a(r),u&&r===1?await A(U(V,c)):await l()}},Y="loadScript cannot be called when document does not exist",q="loadScript cannot be called without a src";async function G(e="",t){const{async:r,defer:n,beforeLoad:o,crossOrigin:i,nonce:s}=t||{};return H(()=>new Promise((c,a)=>{e||a(new Error(q)),(!document||!document.body)&&a(new Error(Y));const l=document.createElement("script");i&&l.setAttribute("crossorigin",i),l.async=r||!1,l.defer=n||!1,l.addEventListener("load",()=>{l.remove(),c(l)}),l.addEventListener("error",d=>{l.remove(),a(d.error??new Error(`failed to load script: ${e}`))}),l.src=e,l.nonce=s,o?.(l),document.body.appendChild(l)}),{shouldRetry:(c,a)=>a<=5})}function X(e){return e?Z(e)||I(e):!0}function Z(e){return/^http(s)?:\/\//.test(e||"")}function I(e){return e.startsWith("/")}function Q(e){return e?I(e)?new URL(e,window.location.origin).toString():e:""}function ee(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`}const te=(e,t="5.123.1")=>{if(e)return e;const r=re(t);return r?r==="snapshot"?"5.123.1":r:ne(t)},re=e=>e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/)?.[1],ne=e=>e.trim().replace(/^v/,"").split(".")[0],T="failed_to_load_clerk_js",oe="failed_to_load_clerk_js_timeout",p="Failed to load Clerk",{isDevOrStagingUrl:ie}=j(),M=z({packageName:"@clerk/shared"});function se(e){M.setPackageName({packageName:e})}function y(){if(typeof window>"u"||!window.Clerk)return!1;const e=window.Clerk;return typeof e=="object"&&typeof e.load=="function"}function ae(e){if(typeof window>"u"||!window.performance)return!1;const t=performance.getEntriesByName(e,"resource");if(t.length===0)return!1;const r=t[t.length-1];return r.transferSize===0&&r.decodedBodySize===0&&(r.responseEnd===0||r.responseEnd>0&&r.responseStart>0||"responseStatus"in r&&(r.responseStatus>=400||r.responseStatus===0))}function k(e,t){return new Promise((r,n)=>{let o=!1;const i=(l,d)=>{clearTimeout(l),clearInterval(d)};t?.addEventListener("error",()=>{i(c,a),n(new m(p,{code:T}))});const s=()=>{o||y()&&(o=!0,i(c,a),r(null))},c=setTimeout(()=>{o||(o=!0,i(c,a),y()?r(null):n(new m(p,{code:oe})))},e);s();const a=setInterval(()=>{if(o){clearInterval(a);return}s()},100)})}const le=async e=>{const t=e?.scriptLoadTimeout??15e3;if(y())return null;if(!e?.publishableKey)return M.throwMissingPublishableKeyError(),null;const r=ce(e),n=document.querySelector("script[data-clerk-js-script]");if(n)if(ae(r))n.remove();else try{return await k(t,n),null}catch{n.remove()}const o=k(t);return G(r,{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:de(e)}).catch(i=>{throw new m(p+(i.message?`, ${i.message}`:""),{code:T,cause:i})}),o},ce=e=>{const{clerkJSUrl:t,clerkJSVariant:r,clerkJSVersion:n,proxyUrl:o,domain:i,publishableKey:s}=e;if(t)return t;let u="";o&&X(o)?u=Q(o).replace(/http(s)?:\/\//,""):i&&!ie(g(s)?.frontendApi||"")?u=ee(i):u=g(s)?.frontendApi||"";const c=r?`${r.replace(/\.+$/,"")}.`:"",a=te(n);return`https://${u}/npm/@clerk/clerk-js@${a}/dist/clerk.${c}browser.js`},ue=e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t},de=e=>t=>{const r=ue(e);for(const n in r)t.setAttribute(n,r[n])};var x=()=>{["handleRedirectCallback"].forEach(t=>{document.querySelectorAll(`[data-clerk-function-id^="clerk-${t}"]`).forEach(n=>{const o=n.getAttribute("data-clerk-function-id"),i=window.__astro_clerk_function_props?.get(t)?.get(o)??{};h.get()?.[t]?.(i)})})},K=()=>{Object.entries({"create-organization":"mountCreateOrganization","organization-list":"mountOrganizationList","organization-profile":"mountOrganizationProfile","organization-switcher":"mountOrganizationSwitcher","user-avatar":"mountUserAvatar","user-button":"mountUserButton","user-profile":"mountUserProfile","sign-in":"mountSignIn","sign-up":"mountSignUp","google-one-tap":"openGoogleOneTap",waitlist:"mountWaitlist","pricing-table":"mountPricingTable","api-keys":"mountAPIKeys"}).forEach(([t,r])=>{document.querySelectorAll(`[data-clerk-id^="clerk-${t}"]`).forEach(o=>{const i=o.getAttribute("data-clerk-id"),s=window.__astro_clerk_component_props?.get(t)?.get(i);o&&h.get()?.[r](o,s)})})},fe=e=>{let t=!1;return r=>{if(t){const n=window.Clerk;return new Promise(o=>n?(n.loaded&&(K(),x()),o(n.loaded)):o(!1))}return t=!0,e(r)}},E;se("@clerk/astro");function v(e){return(t,r)=>{r?.__internal_metadata?.navigationType==="internal"?e(history.state,"",t):r?.windowNavigate(t)}}var he=fe(me);async function me(e){let t=window.Clerk;if(!t){if(await le(e),!window.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");t=window.Clerk}return h.get()||h.set(t),E={routerPush:v(window.history.pushState.bind(window.history)),routerReplace:v(window.history.replaceState.bind(window.history)),...e},t.load(E).then(()=>{f.setKey("isLoaded",!0),$.notify(),K(),x(),t.addListener(r=>{f.setKey("client",r.client),f.setKey("user",r.user),f.setKey("session",r.session),f.setKey("organization",r.organization)})}).catch(()=>{})}var pe=e=>{const{signInUrl:t,signUpUrl:r,isSatellite:n,proxyUrl:o,domain:i,publishableKey:s,telemetry:u,...c}=e||{};return{signInUrl:t||void 0,signUpUrl:r||void 0,isSatellite:n||void 0,proxyUrl:o||void 0,domain:i||void 0,publishableKey:s||void 0||"",telemetry:u||{disabled:b(),debug:b()},...c}};function ye(e){async function t(r){const n=document.getElementById("__CLERK_ASTRO_DATA__");n&&D.set(JSON.parse(n.textContent||"{}"));const o=document.getElementById("__CLERK_ASTRO_SAFE_VARS__");let i={};o&&(i=JSON.parse(o.textContent||"{}")),await e(pe({...r,...i}))}return t}var S="data-astro-transition-persist",ge="data-emotion";function Ee(e,t){e.deselectScripts(t),e.swapRootAttributes(t);const r=document.querySelectorAll(`style[${ge}]`);we(t,Array.from(r));const n=e.saveFocus();e.swapBodyElement(t.body,document.body),n()}function we(e,t){for(const r of Array.from(document.head.children)){const n=be(r,e);n?n.remove():t.includes(r)||r.remove()}document.head.append(...e.head.children)}function be(e,t){const r=e.getAttribute(S),n=r&&t.head.querySelector(`[${S}="${r}"]`);if(n)return n;if(e.matches("link[rel=stylesheet]")){const o=e.getAttribute("href");return t.head.querySelector(`link[rel=stylesheet][href="${o}"]`)}return null}var ve=ye(he);export{ve as r,Ee as s};
