---
// Lesson 1: Basic Setup - Your First Agent
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Lekcija 1: Tvoj prvi agent | tutorijal.hr">
  <main class="min-h-screen bg-gradient-to-b from-purple-50 to-white py-12 px-4">
    <div class="max-w-3xl mx-auto">
      <!-- Breadcrumb -->
      <nav class="mb-6">
        <a href="/" class="text-blue-600 hover:underline">â† Natrag na poÄetnu</a>
      </nav>

      <!-- Header -->
      <div class="bg-white rounded-2xl p-8 shadow-sm mb-6">
        <div class="flex items-center gap-3 mb-4">
          <span class="text-4xl">ğŸš€</span>
          <div class="text-sm text-purple-600 font-medium">Lekcija 1 od 5</div>
        </div>
        
        <h1 class="text-3xl font-bold text-gray-800 mb-4">Osnovni setup: Pokreni svog prvog agenta</h1>
        
        <p class="text-lg text-gray-600">
          NauÄi kako postaviti OpenClaw i stvoriti prvog digitalnog pomoÄ‡nika 
          koji Ä‡e ti Å¡tediti vrijeme.
        </p>
      </div>

      <!-- Content -->
      <div class="space-y-6">
        <!-- Section 1 -->
        <div class="bg-white rounded-xl p-6 shadow-sm">
          <h2 class="text-xl font-bold mb-4">ğŸ¤” Å to je agent?</h2>
          
          <p class="text-gray-700 mb-4">
            Zamisli da imaÅ¡ pomoÄ‡nika koji:
          </p>
          
          <ul class="list-disc list-inside space-y-2 text-gray-700 mb-4">
            <li>ğŸ“° ÄŒita vijesti umjesto tebe i izvlaÄi vaÅ¾no</li>
            <li>ğŸ“§ Provjerava email i upozorava na hitne poruke</li>
            <li>ğŸŒ¤ï¸ Svako jutro javlja prognozu i najave</li>
            <li>â° PodsjeÄ‡a na roÄ‘endane i vaÅ¾ne datume</li>
          </ul>
          
          <div class="bg-blue-50 rounded-lg p-4">
            <p class="text-blue-800">
              <strong>Agent = digitalni pomoÄ‡nik</strong> koji radi zadatke dok ti radiÅ¡ druge stvari.
            </p>
          </div>
        </div>

        <!-- Section 2 -->
        <div class="bg-white rounded-xl p-6 shadow-sm">
          <h2 class="text-xl font-bold mb-4">âš¡ Prvi zadatak: "Jutarnji pregled"</h2>
          
          <p class="text-gray-700 mb-4">
            Stvorit Ä‡emo jednostavnog agenta koji svako jutro:
          </p>
          
          <ol class="list-decimal list-inside space-y-2 text-gray-700 mb-6">
            <li>Provjeri vrijeme i prognozu</li>
            <li>ProÄita naslove s Jutarnjeg lista</li>
            <li>PoÅ¡alje ti saÅ¾etak na Telegram/WhatsApp</li>
          </ol>

          <!-- Interactive Demo -->
          <div class="border-2 border-purple-200 rounded-xl p-4 bg-purple-50">
            <h3 class="font-bold text-purple-800 mb-3">ğŸ® Isprobaj odmah!</h3>
            
            <p class="text-sm text-gray-600 mb-4">
              Unesi svoj grad i odaberi Å¡to Å¾eliÅ¡ u jutarnjem pregledu:
            </p>

            <form id="morning-setup" class="space-y-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Tvoj grad:
                </label>
                <input 
                  type="text" 
                  id="city" 
                  placeholder="npr. Zagreb" 
                  class="w-full p-2 border rounded-lg"
                />
              </div>

              <div class="flex flex-wrap gap-2">
                <label class="text-sm font-medium text-gray-700">Å to Å¾eliÅ¡ u pregledu:</label>
                
                <div class="flex flex-wrap gap-2">
                  {['Vrijeme', 'Vijesti', 'Kalendar', 'Promet'].map(item => (
                    <label class="flex items-center gap-1 bg-white px-3 py-1 rounded-full border cursor-pointer hover:bg-purple-100">
                      <input type="checkbox" value={item} class="morning-item" />
                      <span class="text-sm">{item}</span>
                    </label>
                  ))}
                </div>
              </div>

              <button 
                type="button"
                id="generate-morning-agent"
                class="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition"
              >
                ğŸš€ Generiraj mojeg agenta
              </button>
            </form>

            <!-- Result Area -->
            <div id="morning-result" class="hidden mt-4 bg-white rounded-lg p-4 border border-purple-300">
              <h4 class="font-bold text-purple-800 mb-2">ğŸ“ Tvoj agent je spreman!</h4>
              <pre id="agent-code" class="bg-gray-800 text-green-400 p-3 rounded-lg text-xs overflow-x-auto"></pre>
              
              <p class="text-sm text-gray-600 mt-3">
                ğŸ’¡ <strong>SljedeÄ‡i korak:</strong> Kopiraj ovaj kod i spremi ga kao 
                <code>~/morning-agent.sh</code>
              </p>
            </div>
          </div>
        </div>

        <!-- Section 3: Tips -->
        <div class="bg-yellow-50 rounded-xl p-6 border-l-4 border-yellow-400">
          <h2 class="text-xl font-bold mb-4">ğŸ’¡ Trikovi za poÄetnike</h2>
          
          <div class="space-y-3 text-gray-700">
            <p>
              <strong>1. PoÄni malo:</strong> Nemoj odmah automatizirati sve. 
              Odaberi JEDAN zadatak koji ti najviÅ¡e smeta.
            </p>
            
            <p>
              <strong>2. Testiraj prije nego Å¡to "pustiÅ¡":</strong> 
              Uvijek prvo provjeri radi li agent kako treba.
            </p>
            
            <p>
              <strong>3. Ne boj se greÅ¡aka:</strong> 
              Svaki agent se moÅ¾e iskljuÄiti i popraviti.
            </p>
          </div>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between items-center pt-6">
          <a href="/" class="text-gray-600 hover:text-blue-600 transition">
            â† PoÄetna
          </a>          
          <a 
            href="/lekcija/2" 
            class="bg-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-purple-700 transition"
          >
            SljedeÄ‡a lekcija: Dva agenta â†’
          </a>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Interactive demo
    document.getElementById('generate-morning-agent')?.addEventListener('click', function() {
      const city = (document.getElementById('city') as HTMLInputElement)?.value || 'Zagreb';
      const items = Array.from(document.querySelectorAll('.morning-item:checked'))
        .map(cb => (cb as HTMLInputElement).value);
      
      if (items.length === 0) {
        alert('Odaberi barem jednu stavku za pregled!');
        return;
      }
      
      const code = `# Morning Agent za ${city}
# PokreÄ‡e se svako jutro u 7:00

cron: {
  schedule: "0 7 * * *",
  tasks: [
${items.map(item => `    "${item.toLowerCase()}:fetch"`).join(',\n')}
  ],
  notify: "telegram"
}

# Rezultat: Svako jutro dobijeÅ¡ poruku:
# "Dobro jutro! U ${city} je 15Â°C. 
#  Top vijesti: Grad kupio bicikle..."`;
      
      const resultDiv = document.getElementById('morning-result');
      const codePre = document.getElementById('agent-code');
      
      if (resultDiv && codePre) {
        codePre.textContent = code;
        resultDiv.classList.remove('hidden');
      }
    });

    // Save lesson progress
    fetch('/api/progress', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ lessonId: 1, timeSpent: 3 })
    }).catch(console.error);
  </script>
</Layout>
